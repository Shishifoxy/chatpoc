{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport * as Stomp from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nlet AppComponent = class AppComponent {\n  constructor() {\n    this.connected = false;\n    this.roomId = '';\n    this.sender = '';\n    this.role = 'client';\n    this.content = '';\n    this.messages = [];\n    this.rooms = [];\n    this.connect();\n  }\n  connect() {\n    const socket = new SockJS('http://localhost:8080/ws-chat');\n    this.stompClient = Stomp.Stomp.over(socket);\n    this.stompClient.connect({}, () => {\n      this.connected = true;\n      this.stompClient.subscribe('/topic/messages', message => {\n        const msg = JSON.parse(message.body);\n        this.messages.push(msg);\n        if (!this.rooms.includes(msg.roomId)) {\n          this.rooms.push(msg.roomId);\n        }\n      });\n    });\n  }\n  joinRoom(room) {\n    this.roomId = room;\n  }\n  getFilteredMessages() {\n    return this.messages.filter(m => m.roomId === this.roomId);\n  }\n  sendMessage() {\n    const msg = {\n      roomId: this.roomId,\n      sender: this.sender,\n      content: this.content,\n      role: this.role\n    };\n    this.stompClient.send('/app/chat.sendMessage', {}, JSON.stringify(msg));\n    this.content = '';\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html'\n})], AppComponent);\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module"}